(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{f0pd:function(e,t,n){"use strict";n.r(t);n("g9YV");var a=n("wCAj"),r=n("ODXe"),c=n("q1tI"),u=n.n(c),i=n("o0o1"),l=n.n(i),m=n("HaE+"),s=n("t3Un");function p(){return o.apply(this,arguments)}function o(){return o=Object(m["a"])(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])("/api/sns/v1/lit/experiment/all_experiments",{method:"GET",params:{}}));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return d=Object(m["a"])(l.a.mark((function e(t){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])("/api/sns/v1/lit/experiment/get_experiments",{method:"GET",params:{exp_name:t.exp_name}}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function x(e){return E.apply(this,arguments)}function E(){return E=Object(m["a"])(l.a.mark((function e(t){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])("/api/sns/v1/lit/experiment/set_experiments?exp_name=".concat(t.exp_name),{method:"POST",data:t.data}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}n("+L6B");var y=n("2/Rp"),h=(n("14J3"),n("BMrR")),b=(n("giR+"),n("fyUT")),v=(n("jCWc"),n("kPKH")),w=(n("y8nQ"),n("Vl3Y")),_=(n("5NDa"),n("5rEg")),k=(n("/xke"),n("TeRw")),j=(n("iB5I"),n("wlus")),O=n("xvlK"),I=[{required:!0}],g=function(e){var t=Object(c["useRef"])(),n=e.name,a=function(e){console.log("Received values of form:",e);var t={},a=0;e.experiments.forEach((function(e){t[e.exp_name]=Number(e.exp_value),a+=t[e.exp_name]})),a>100?k["a"].open({message:"\u6bd4\u4f8b\u8bbe\u7f6e\u9519\u8bef"}):x({exp_name:n,data:{value_buckets:t}}).then((function(e){e.success&&k["a"].open({message:"\u66f4\u65b0\u6210\u529f"})}))};return Object(c["useEffect"])((function(){f({exp_name:n}).then((function(e){e.success&&t.current.setFieldsValue({experiments:e.data.map((function(e){return{exp_name:e[0],exp_value:e[1]}}))})}))}),[]),u.a.createElement(w["a"],{ref:t,onFinish:a,className:"my-form"},u.a.createElement(w["a"].List,{name:"experiments"},(function(e,t){var n=t.add,a=t.remove;return u.a.createElement("div",null,e.map((function(e,t){return u.a.createElement(h["a"],{key:e.key},u.a.createElement(v["a"],null,u.a.createElement(w["a"].Item,{name:[e.name,"exp_name"],fieldKey:[e.fieldKey,"exp_name"],rules:I},u.a.createElement(_["a"],{placeholder:"\u5b9e\u9a8c\u540d\u79f0"}))),u.a.createElement(v["a"],null,u.a.createElement(w["a"].Item,{name:[e.name,"exp_value"],fieldKey:[e.fieldKey,"exp_value"],rules:I,style:{marginLeft:10}},u.a.createElement(b["a"],{min:1,max:100,placeholder:"\u5b9e\u9a8c\u6bd4\u4f8b"}))),u.a.createElement(v["a"],{flex:"none"},u.a.createElement(j["a"],{style:{marginLeft:10},className:"dynamic-delete-button",onClick:function(){a(e.name)}})))})),u.a.createElement(w["a"].Item,null,u.a.createElement(y["a"],{type:"dashed",onClick:function(){n()},style:{width:"20%"}},u.a.createElement(O["a"],null)," \u589e\u52a0\u5b9e\u9a8c")))})),u.a.createElement(w["a"].Item,null,u.a.createElement(y["a"],{type:"primary",htmlType:"submit"},"Submit")))},R=g,K=[{title:"\u5b9e\u9a8c\u540d\u5b57",dataIndex:"name",key:"name"},{title:"\u65e5\u671f",dataIndex:"time",key:"time"},{title:"\u5b9e\u9a8c\u5185\u5bb9",dataIndex:"desc",key:"desc"},{title:"Action",dataIndex:"",key:"x",render:function(){return u.a.createElement("a",null,"\u5220\u9664")}}];function T(e){var t=Object(c["useState"])([]),n=Object(r["a"])(t,2),i=n[0],l=n[1];return Object(c["useEffect"])((function(){p().then((function(e){e.success&&l(e.data.exp_names.map((function(e){return{name:e,time:"--",desc:"--"}})))}))}),[]),u.a.createElement("div",null,u.a.createElement(a["a"],{columns:K,expandable:{expandedRowRender:function(e){return u.a.createElement(R,{name:e.name})},rowExpandable:function(){return!0}},rowKey:"name",dataSource:i}))}t["default"]=T},iB5I:function(e,t,n){}}]);